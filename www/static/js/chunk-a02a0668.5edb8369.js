(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a02a0668"],{"07ee":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-drawer",{attrs:{title:e.isUpdate?e.$t("updateTitle"):e.$t("saveTitle"),width:e.widths,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[a("a-form",{attrs:{form:e.form,layout:"vertical"}},[a("a-row",{attrs:{gutter:24}},[e.isUpdate?a("a-divider",[e._v(e._s(e.$t("basicConfiguration")))]):e._e(),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:e.$t("name")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$ta("input|name"),whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: $ta('input|name'), whitespace: true}]}]"}],attrs:{placeholder:e.$ta("input|name")}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:e.$t("command")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["command",{rules:[{required:!0,message:e.$ta("input|command"),whitespace:!0}]}],expression:"['command', {rules: [{ required: true, message: $ta('input|command'), whitespace: true}]}]"}],attrs:{placeholder:e.$ta("input|command")}})],1)],1),e.isUpdate?e._e():[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:e.$t("schedule")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["schedule",{rules:[{required:!0,message:e.$ta("input|command"),whitespace:!0}]}],expression:"['schedule', {rules: [{ required: true, message: $ta('input|command'), whitespace: true}]}]"}],attrs:{placeholder:e.$ta("input|command")}})],1)],1)],a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:e.$t("labels")}},[e._l(e.labels,(function(t,n){return[t.length>20?a("a-tooltip",{key:t,attrs:{title:t}},[a("a-tag",{key:t,attrs:{closable:0!==n},on:{close:function(){return e.handleClose(t)}}},[e._v(" "+e._s(t.slice(0,20)+"...")+" ")])],1):a("a-tag",{key:t,attrs:{closable:0!==n},on:{close:function(){return e.handleClose(t)}}},[e._v(" "+e._s(t)+" ")])]})),e.inputVisible?a("a-input",{ref:"input",style:{width:"78px"},attrs:{type:"text",size:"small",value:e.inputValue},on:{change:e.handleInputChange,blur:e.handleInputConfirm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm(t)}}}):a("a-tag",{staticStyle:{background:"#fff",borderStyle:"dashed"},on:{click:e.showInput}},[a("a-icon",{attrs:{type:"plus"}})],1)],2)],1),e.isUpdate?e._e():[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:e.$t("syncTasks")}},[a("a-select",{attrs:{mode:"multiple",placeholder:e.$ta("select|syncTasks"),"option-label-prop":"label","option-filter-prop":"label",maxTagCount:5},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},[e._l(e.qlNameMapper,(function(t,n){return[a("a-select-option",{key:n,attrs:{value:n,label:t}},[e._v(" "+e._s(t)+" ")])]}))],2)],1)],1)],e.isUpdate?a("a-divider",[e._v(e._s(e.$t("detailedConfiguration")))]):e._e()],2),e.isUpdate?a("div",[e._l(e.fromData.qlTaskDepicts,(function(t){return[a("a-row",{key:t.qlId,attrs:{gutter:24,type:"flex",justify:"space-around",align:"middle"}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["schedule"+t.qlId,{rules:[{required:!0,message:e.$t("input")+e.qlNameMapper[t.qlId]+e.$t("schedule"),whitespace:!0}]}],expression:"['schedule' + item.qlId, {rules: [{ required: true, message: $t('input') + qlNameMapper[item.qlId] + $t('schedule'), whitespace: true}]}]"}],attrs:{"addon-before":e.qlNameMapper[t.qlId]+e.$t("schedule"),placeholder:e.$t("input")+e.qlNameMapper[t.qlId]+e.$t("schedule")}})],1)],1)],1)]}))],2):e._e()],1),a("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[a("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" "+e._s(e.$t("cancel"))+" ")]),a("a-button",{attrs:{type:"primary",loading:e.isSubmit},on:{click:e.onSubmit}},[e._v(" "+e._s(e.$t("submit"))+" ")])],1)],1),a("a-card",{staticClass:"result-success"},[a("div",{staticClass:"table-operations"},[a("a-row",{attrs:{gutter:24,type:"flex",justify:"space-around",align:"middle"}},[a("a-col",{staticClass:"cores-bottom",attrs:{md:12,sm:24}},[a("a-space",{attrs:{size:10}},[a("a-button",{attrs:{type:"primary",icon:"plus",disabled:0===Object.keys(e.qlNameMapper).length},on:{click:e.showDrawer}},[e._v(e._s(e.$t("add")))]),a("a-button",{attrs:{type:"danger",icon:"delete",disabled:0===e.selectedRows.length},on:{click:function(t){return e.deleteTask(e.selectedRows)}}},[e._v(e._s(e.$t("delete")))]),a("a-dropdown",{attrs:{disabled:0===e.selectedRows.length}},[a("a-menu",{attrs:{slot:"overlay"},on:{click:e.taskEvent},slot:"overlay"},[a("a-menu-item",{key:"run"},[a("a-icon",{attrs:{type:"play-circle"}}),e._v(" "+e._s(e.$t("run"))+" ")],1),a("a-menu-item",{key:"stop"},[a("a-icon",{attrs:{type:"pause-circle"}}),e._v(" "+e._s(e.$t("stop"))+" ")],1),a("a-menu-item",{key:"enable"},[a("a-icon",{attrs:{type:"check-circle"}}),e._v(" "+e._s(e.$t("enable"))+" ")],1),a("a-menu-item",{key:"disable"},[a("a-icon",{attrs:{type:"close-circle"}}),e._v(" "+e._s(e.$t("disable"))+" ")],1),a("a-menu-item",{key:"pin"},[a("a-icon",{attrs:{type:"vertical-align-top"}}),e._v(" "+e._s(e.$t("pin"))+" ")],1),a("a-menu-item",{key:"unpin"},[a("a-icon",{attrs:{type:"vertical-align-bottom"}}),e._v(" "+e._s(e.$t("unpin"))+" ")],1)],1),a("a-button",[e._v(" "+e._s(e.$t("more"))+" "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)],1),a("a-col",{staticClass:"cores-bottom",staticStyle:{"text-align":"right"},attrs:{flex:"right",md:12,sm:24}},[a("a-space",{attrs:{size:10}},[a("a-select",{staticStyle:{width:"60px"},attrs:{allowClear:!0,placeholder:e.$t("status")},on:{change:e.getData},model:{value:e.query.status,callback:function(t){e.$set(e.query,"status",t)},expression:"query.status"}},[a("a-select-option",{attrs:{value:"1"}},[e._v(" "+e._s(e.$t("enable"))+" ")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" "+e._s(e.$t("disable"))+" ")])],1),a("a-select",{staticStyle:{width:"80px"},attrs:{allowClear:!0,placeholder:e.$t("container")},on:{change:e.getData},model:{value:e.query.qlId,callback:function(t){e.$set(e.query,"qlId",t)},expression:"query.qlId"}},[e._l(e.qlNameMapper,(function(t,n){return[a("a-select-option",{key:n,attrs:{value:n}},[e._v(" "+e._s(t)+" ")])]}))],2),a("a-input-search",{staticStyle:{width:"auto"},attrs:{placeholder:e.$t("search"),"enter-button":""},on:{search:e.getData,pressEnter:e.getData},model:{value:e.query.searchValue,callback:function(t){e.$set(e.query,"searchValue",t)},expression:"query.searchValue"}})],1)],1)],1)],1),a("standard-table",{attrs:{columns:e.dataColumns,dataSource:e.dataSource,selectedRows:e.selectedRows,pagination:Object.assign({},e.pagination,{onShowSizeChange:e.onShowSizeAndPageChange,onChange:e.onShowSizeAndPageChange}),rowKey:function(e){return e.name+e.command},scroll:{x:1200}},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}},scopedSlots:e._u([{key:"labels",fn:function(t){var n=t.text;return e._l(n,(function(t,n){return a("a-tag",{key:n,attrs:{color:"cyan"}},[e._v(" "+e._s(t)+" ")])}))}},{key:"taskStatus",fn:function(t){var n=t.text;return e._l(n,(function(t){return a("span",{key:t.qlId},[0===t.status?a("a-tag",{attrs:{color:"green"},on:{click:function(a){return e.stopTask(t,!0)}}},[e._v(" "+e._s(e.qlNameMapper[t.qlId])+" "+e._s(e.$t("run"))+" ")]):3===t.status?a("a-tag",{attrs:{color:"orange"},on:{click:function(a){return e.stopTask(t,!0)}}},[e._v(" "+e._s(e.qlNameMapper[t.qlId])+" "+e._s(e.$t("queue"))+" ")]):a("a-tag",{attrs:{color:"blue"},on:{click:function(a){return e.runTask(t,!0)}}},[e._v(" "+e._s(e.qlNameMapper[t.qlId])+" "+e._s(e.$t("leisure"))+" ")])],1)}))}},{key:"depictsStatus",fn:function(t){var n=t.text;return e._l(n,(function(t){return a("span",{key:t.qlId},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("div",[e._v(e._s(e.$t("table.lastExecutionTime"))+": "+e._s(t.lastExecutionTime?e.formatData(new Date(1e3*t.lastExecutionTime),"yyyy-MM-dd HH:mm:ss"):"---"))]),a("div",[e._v(e._s(e.$t("table.lastRunningTime"))+": "+e._s(t.lastRunningTime>=0?e.formatSecondData(t.lastRunningTime):"---"))]),a("div",[e._v(e._s(e.$t("table.schedule"))+": "+e._s(t.schedule?t.schedule:"-"))])]),t.isDisabled?a("a-tag",{attrs:{color:"red"},on:{click:function(a){return e.enableTask(t,!0)}}},[e._v(" "+e._s(e.qlNameMapper[t.qlId])+" "+e._s(e.$t("disable"))+" ")]):a("a-tag",{attrs:{color:"green"},on:{click:function(a){return e.disableTask(t,!0)}}},[e._v(" "+e._s(e.qlNameMapper[t.qlId])+" "+e._s(e.$t("enable"))+" ")])],2)],1)}))}},{key:"action",fn:function(t){t.text;var n=t.record;return[a("a",{attrs:{type:"link"},on:{click:function(t){return e.toUpdate(n)}}},[a("a-icon",{attrs:{type:"edit"}})],1),e._v(" "),a("a",{attrs:{type:"link"},on:{click:function(t){return e.logTask(n)}}},[a("a-icon",{attrs:{type:"profile"}})],1),e._v(" "),a("a-dropdown",{attrs:{trigger:["click"]}},[a("a",{staticClass:"ant-dropdown-link"},[a("a-icon",{attrs:{type:"ellipsis"}})],1),a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){return e.miniTaskEvent(t,n)}},slot:"overlay"},[a("a-menu-item",{key:"delete"},[a("a-icon",{attrs:{type:"delete"}}),e._v(" "+e._s(e.$t("delete"))+" ")],1),a("a-menu-item",{key:"run"},[a("a-icon",{attrs:{type:"play-circle"}}),e._v(" "+e._s(e.$t("run"))+" ")],1),a("a-menu-item",{key:"stop"},[a("a-icon",{attrs:{type:"pause-circle"}}),e._v(" "+e._s(e.$t("stop"))+" ")],1),a("a-menu-item",{key:"enable"},[a("a-icon",{attrs:{type:"check-circle"}}),e._v(" "+e._s(e.$t("enable"))+" ")],1),a("a-menu-item",{key:"disable"},[a("a-icon",{attrs:{type:"close-circle"}}),e._v(" "+e._s(e.$t("disable"))+" ")],1),a("a-menu-item",{key:"pin"},[a("a-icon",{attrs:{type:"vertical-align-top"}}),e._v(" "+e._s(e.$t("pin"))+" ")],1),a("a-menu-item",{key:"unpin"},[a("a-icon",{attrs:{type:"vertical-align-bottom"}}),e._v(" "+e._s(e.$t("unpin"))+" ")],1)],1)],1)]}}])})],1),a("a-modal",{attrs:{title:e.log.taskLogDetial.name+e.$t("logTitle"),footer:null,width:650,destroyOnClose:!0},on:{ok:e.logModelClose,cancel:e.logModelClose},model:{value:e.log.isShowModal,callback:function(t){e.$set(e.log,"isShowModal",t)},expression:"log.isShowModal"}},[a("a-tabs",{on:{change:e.logCheckCallback}},[e._l(e.log.taskLogDetial.qlTaskDepicts,(function(t){return[a("a-tab-pane",{key:t.qlId+","+t.id+","+t.status,attrs:{tab:e.qlNameMapper[t.qlId]}},[a("a-spin",{attrs:{spinning:e.log.spinning}},[a("p",{domProps:{innerHTML:e._s(e.log.taskLogData?e.log.taskLogData:e.$t("noLogs"))}})])],1)]}))],2)],1)],1)},r=[],s=(a("99af"),a("4de4"),a("c975"),a("d81d"),a("b0c0"),a("4d63"),a("ac1f"),a("25f0"),a("5319"),a("1276"),a("2909")),i=(a("96cf"),a("1da1")),o=a("5530"),c=a("3521"),l=a("2472"),u=a("7424"),d=a("b775");function _(e){return p.apply(this,arguments)}function p(){return p=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].BASE,d["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].BASE,d["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].BASE,d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function b(e){return k.apply(this,arguments)}function k(){return k=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].BASE,d["a"].DELETE,t));case 1:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}function v(e){return w.apply(this,arguments)}function w(){return w=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].DISABLE,d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}function y(e){return T.apply(this,arguments)}function T(){return T=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].ENABLE,d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function R(e){return D.apply(this,arguments)}function D(){return D=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].PIN,d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),D.apply(this,arguments)}function E(e){return C.apply(this,arguments)}function C(){return C=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].RUN,d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}function O(e){return $.apply(this,arguments)}function $(){return $=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].STOP,d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}function q(e){return S.apply(this,arguments)}function S(){return S=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].UNPIN,d["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),S.apply(this,arguments)}function I(e,t){return x.apply(this,arguments)}function x(){return x=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["QL_TASK"].LOG+t+"/"+a,d["a"].GET));case 1:case"end":return e.stop()}}),e)}))),x.apply(this,arguments)}var j=a("5880"),P=[{title:"任务名称",key:"name",width:90,align:"center",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"任务命令",key:"command",width:200,align:"center",dataIndex:"command",scopedSlots:{customRender:"command"}},{title:"任务标签",key:"labels",width:150,align:"center",dataIndex:"labels",scopedSlots:{customRender:"labels"}},{title:"运行状态",key:"taskStatus",width:150,align:"center",dataIndex:"qlTaskDepicts",scopedSlots:{customRender:"taskStatus"}},{title:"详细状态",key:"depictsStatus",width:150,align:"center",dataIndex:"qlTaskDepicts",scopedSlots:{customRender:"depictsStatus"}},{title:"操作",key:"action",width:100,align:"center",scopedSlots:{customRender:"action"}}],M={name:"TaskList",components:{StandardTable:c["a"]},i18n:a("578b"),data:function(){return{form:this.$form.createForm(this),visible:!1,log:{isShowModal:!1,taskLogDetial:{},taskLogData:"",spinning:!1,pollingST:null},dataSource:[],selectedRows:[],columns:P,isSubmit:!1,isUpdate:!1,query:{qlId:void 0,searchValue:void 0,status:void 0},pagination:{current:1,pageSize:10,total:0,showSizeChanger:!0,showQuickJumper:!0},fromData:{},qlNameMapper:{},labels:[],value:[],inputVisible:!1,inputValue:""}},methods:{onShowSizeAndPageChange:function(e,t){this.pagination.current=e,this.pagination.pageSize=t,this.getData()},getData:function(){var e=this;_({page:this.pagination.current,size:this.pagination.pageSize,qlId:this.query.qlId,searchValue:this.query.searchValue,status:this.query.status}).then((function(t){var a,n,r=null!==(a=null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.data)&&void 0!==a?a:{},s=r.data,i=r.total;e.dataSource=s,e.pagination.total=i,e.selectedRows=[]}))},showDrawer:function(){for(var e in this.isUpdate=!1,this.qlNameMapper)this.value.push(e);this.visible=!0},onClose:function(){this.form.resetFields(),this.labels=[],this.value=[],this.fromData={},this.visible=!1},toUpdate:function(e){var t=this;this.isUpdate=!0,this.visible=!0;var a={name:e.name,command:e.command};this.fromData=e,this.labels=e.labels;for(var n=0;n<this.fromData.qlTaskDepicts.length;n++)a["schedule"+this.fromData.qlTaskDepicts[n].qlId]=this.fromData.qlTaskDepicts[n].schedule;this.$nextTick((function(){t.form.setFieldsValue(a)}))},onSubmit:function(){var e=this;this.isSubmit=!0,this.form.validateFields((function(t,a){t?e.isSubmit=!1:(e.isUpdate?e.update(a):e.save(a)).then((function(t){var a=t.data;200===a.code?(e.getData(),e.$message.success(a.message),e.visible=!1,e.form.resetFields()):e.$message.error(a.message),e.isSubmit=!1})).catch((function(t){e.$message.error(t.message),e.isSubmit=!1}))}))},save:function(e){var t=[];if(0!==this.value.length){for(var a=0;a<this.value.length;a++)t.push(Object(o["a"])(Object(o["a"])({},e),{},{labels:this.labels,qlId:this.value[a]}));return m(t)}this.$message.error("请选择同步容器")},update:function(e){for(var t=[],a=0;a<this.fromData.qlTaskDepicts.length;a++)t.push({name:e.name,command:e.command,schedule:e["schedule"+this.fromData.qlTaskDepicts[a].qlId],qlId:this.fromData.qlTaskDepicts[a].qlId,labels:this.labels,taskId:this.fromData.qlTaskDepicts[a].id});return f(t)},taskEvent:function(e){if(this.selectedRows.length>0)switch(e.key){case"run":this.runTask(this.selectedRows);break;case"stop":this.stopTask(this.selectedRows);break;case"enable":this.enableTask(this.selectedRows);break;case"disable":this.disableTask(this.selectedRows);break;case"pin":this.pinTask(this.selectedRows);break;case"unpin":this.unpinTask(this.selectedRows);break}},miniTaskEvent:function(e,t){switch(e.key){case"delete":this.deleteTask(t);break;case"run":this.runTask(t);break;case"stop":this.stopTask(t);break;case"enable":this.enableTask(t);break;case"disable":this.disableTask(t);break;case"pin":this.pinTask(t);break;case"unpin":this.unpinTask(t);break}},logTask:function(e){this.log.taskLogDetial=e,this.logCheckCallback(e.qlTaskDepicts[0].qlId+","+e.qlTaskDepicts[0].id+","+e.qlTaskDepicts[0].status),this.log.isShowModal=!0},logModelClose:function(){this.log.isShowModal=!1,this.log.taskLogData="",clearTimeout(this.log.pollingST)},logCheckCallback:function(e){clearTimeout(this.log.pollingST),this.log.taskLogData="",this.log.spinning=!0;var t=e.split(",");this.getLog(t,0==t[2])},getLog:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I(e[0],e[1]).then((function(n){var r,s,i;t.log.taskLogData=null!==(r=null===n||void 0===n||null===(s=n.data)||void 0===s||null===(i=s.data)||void 0===i?void 0:i.replace(/\n/g,"<br/>"))&&void 0!==r?r:"",t.log.spinning=!1,a&&(t.log.pollingST=setTimeout((function(){clearTimeout(t.log.pollingST),t.getLog(e,a)}),3e3))})).catch((function(e){t.$message.error(e.message),t.log.spinning=!1,clearTimeout(t.log.pollingST)}))},runTask:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];a?n.push({qlId:e.qlId,taskId:[e.id]}):n=this.dataHandle(e),this.confirmPop("confirm.runTitle","confirm.runContent",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:E(n).then((function(e){200===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getData()})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return e.stop()}}),e)}))))},stopTask:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];a?n.push({qlId:e.qlId,taskId:[e.id]}):n=this.dataHandle(e),this.confirmPop("confirm.stopTitle","confirm.stopContent",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:O(n).then((function(e){200===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getData()})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return e.stop()}}),e)}))))},enableTask:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];a?n.push({qlId:e.qlId,taskId:[e.id]}):n=this.dataHandle(e),this.confirmPop("confirm.enableTitle","confirm.enableContent",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:y(n).then((function(e){200===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getData()})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return e.stop()}}),e)}))))},disableTask:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[];a?n.push({qlId:e.qlId,taskId:[e.id]}):n=this.dataHandle(e),this.confirmPop("confirm.disableTitle","confirm.disableContent",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:v(n).then((function(e){200===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getData()})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return e.stop()}}),e)}))))},pinTask:function(e){var t=this,a=this.dataHandle(e);this.confirmPop("confirm.pinTitle","confirm.pinContent",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:R(a).then((function(e){200===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getData()})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return e.stop()}}),e)}))))},unpinTask:function(e){var t=this,a=this.dataHandle(e);this.confirmPop("confirm.unpinTitle","confirm.unpinContent",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:q(a).then((function(e){200===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getData()})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return e.stop()}}),e)}))))},deleteTask:function(e){var t=this,a=this.dataHandle(e);this.confirmPop("confirmTitle","confirmContent",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:b(a).then((function(e){200===e.data.code?t.$message.success(e.data.message):t.$message.error(e.data.message),t.getData()})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return e.stop()}}),e)}))))},confirmPop:function(e,t,a){this.$confirm({title:this.$t(e),content:this.$t(t),okText:this.$t("affirm"),cancelText:this.$t("cancel"),onOk:a})},dataHandle:function(e){e instanceof Array||(e=[e]);for(var t={},a=0;a<e.length;a++)for(var n=0;n<e[a].qlTaskDepicts.length;n++){var r=e[a].qlTaskDepicts[n];t[r.qlId]||(t[r.qlId]=[]),t[r.qlId].push(r.id)}var s=[];for(var i in t)s.push({qlId:i,taskId:t[i]});return s},formatData:function(e,t){var a={"M+":e.getMonth()+1,"d+":e.getDate(),"H+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),a)new RegExp("("+n+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?a[n]:("00"+a[n]).substr((""+a[n]).length)));return t},formatSecondData:function(e){var t="";return e>=86400&&(t+=parseInt(e/86400)+"天"),e%=86400,e>=3600&&(t+=parseInt(e/3600)+"小时"),e%=3600,e>=60&&(t+=parseInt(e/60)+"分"),e%=60,t+=e+"秒",t},handleClose:function(e){var t=this.labels.filter((function(t){return t!==e}));this.labels=t},showInput:function(){this.inputVisible=!0,this.$nextTick((function(){this.$refs.input.focus()}))},handleInputChange:function(e){this.inputValue=e.target.value},handleInputConfirm:function(){var e=this.inputValue,t=this.labels;e&&-1===t.indexOf(e)&&(t=[].concat(Object(s["a"])(t),[e])),Object.assign(this,{labels:t,inputVisible:!1,inputValue:""})}},mounted:function(){var e=this;Object(l["d"])().then((function(t){var a=t.data.data;if(a)for(var n=0;n<a.length;n++)a[n].enable&&e.$set(e.qlNameMapper,a[n].id,a[n].name)})),this.getData()},computed:Object(o["a"])(Object(o["a"])({},Object(j["mapState"])("setting",["lang"])),{},{widths:function(){return document.documentElement.clientWidth>720?720:document.documentElement.clientWidth},dataColumns:function(){var e=this;return this.columns.map((function(t){return t.title=e.$t("table."+t.key),t}))}})},L=M,A=(a("406e"),a("0c7c")),K=Object(A["a"])(L,n,r,!1,null,"f8b3850a",null);t["default"]=K.exports},"13d5":function(e,t,a){"use strict";var n=a("23e7"),r=a("d58f").left,s=a("a640"),i=a("ae40"),o=s("reduce"),c=i("reduce",{1:0});n({target:"Array",proto:!0,forced:!o||!c},{reduce:function(e){return r(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},1921:function(e,t,a){},2472:function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"c",(function(){return _})),a.d(t,"b",(function(){return m})),a.d(t,"a",(function(){return f}));a("96cf");var n=a("1da1"),r=a("7424"),s=a("b775");function i(){return o.apply(this,arguments)}function o(){return o=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["f"])(r["QL_DEPICT"],s["a"].GET));case 1:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["f"])(r["QL_DEPICT"],s["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["f"])(r["QL_DEPICT"],s["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function _(e){return p.apply(this,arguments)}function p(){return p=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["f"])(r["QL_DEPICT_ENABLE"]+t,s["a"].PUT));case 1:case"end":return e.stop()}}),e)}))),p.apply(this,arguments)}function m(e){return h.apply(this,arguments)}function h(){return h=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["f"])(r["QL_DEPICT_DISABLE"]+t,s["a"].PUT));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s["f"])(r["QL_DEPICT"]+t,s["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}},3521:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"standard-table"},[a("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.pagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,scroll:e.scroll,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onSelect:e.onSelect,onSelectAll:e.onSelectAll}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(a,n,r){return[e._t(t,null,null,{text:a,record:n,index:r})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,a,n,r){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:a,indent:n,expanded:r})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return a("template",{slot:t},[e._t(t)],2)}))],2)],1)},r=[],s=a("7644"),i=s["a"],o=(a("6892"),a("0c7c")),c=Object(o["a"])(i,n,r,!1,null,"11bb3bd6",null);t["a"]=c.exports},"3a5f":function(e,t,a){},"406e":function(e,t,a){"use strict";var n=a("1921"),r=a.n(n);r.a},"578b":function(e,t){e.exports={messages:{CN:{saveTitle:"添加任务配置",updateTitle:"更新任务配置",add:"添加",delete:"删除",more:"更多",run:"运行",stop:"停止",enable:"启用",disable:"禁用",pin:"置顶",container:"容器",queue:"队列",leisure:"空闲",status:"状态",unpin:"取消置顶",confirmTitle:"确定删除？",confirmContent:"删除后将无法恢复",affirm:"确认",cancel:"取消",submit:"提交",basicConfiguration:"任务基础配置",detailedConfiguration:"任务详细配置",input:"请输入",select:"请选择",name:"任务名称",command:"任务命令",labels:"任务标签",schedule:"定时规则",search:"请输入搜索内容",syncTasks:"同步任务",logTitle:"任务日志",noLogs:"暂无日志",table:{name:"任务名称",command:"任务命令",labels:"任务标签",taskStatus:"运行状态",depictsStatus:"详细状态",action:"操作",schedule:"定时规则",lastExecutionTime:"最后运行",lastRunningTime:"运行时长"},confirm:{runTitle:"确认运行",runContent:"你确认运行选择的任务吗？",stopTitle:"确认停止",stopContent:"你确认停止选择的任务吗？",enableTitle:"确认启用",enableContent:"你确认启用选择的任务吗？",disableTitle:"确认禁用",disableContent:"你确认禁用选择的任务吗？",pinTitle:"确认置顶",pinContent:"你确认置顶选择的任务吗？",unpinTitle:"确认取消置顶",unpinContent:"你确认取消置顶选择的任务吗？"}},HK:{saveTitle:"添加任務配置",updateTitle:"更新任務配置",add:"添加",delete:"删除",more:"更多",run:"運行",stop:"停止",enable:"啟用",disable:"禁用",pin:"置頂",unpin:"取消置頂",container:"容器",queue:"隊列",leisure:"空閒",status:"狀態",confirmTitle:"確認刪除?",confirmContent:"刪除後將無法恢復",affirm:"確認",cancel:"取消",submit:"提交",basicConfiguration:"任務基礎配置",detailedConfiguration:"任務詳細配置",input:"請輸入",select:"請選擇",name:"任務名稱",command:"任務命令",labels:"任務標籤",schedule:"定時規則",search:"請輸入搜索內容",syncTasks:"同步任務",logTitle:"任務日誌",noLogs:"暫無日志",table:{name:"任務名稱",command:"任務命令",labels:"任務標籤",taskStatus:"運行狀態",depictsStatus:"詳細狀態",action:"操作",schedule:"定時規則",lastExecutionTime:"最後運行",lastRunningTime:"運行時長"},confirm:{runTitle:"確認運行",runContent:"你確認運行選擇的任務嗎？",stopTitle:"確認停止",stopContent:"你確認停止選擇的任務嗎？",enableTitle:"確認啟用",enableContent:"你確認啟用選擇的任務嗎？",disableTitle:"確認禁用",disableContent:"你確認禁用選擇的任務嗎？",pinTitle:"確認置頂",pinContent:"你確認置頂選擇的任務嗎？",unpinTitle:"確認取消置頂",unpinContent:"你確認取消置頂選擇的任務嗎？"}},US:{saveTitle:"Add Task Configuration",updateTitle:"Update Task Configuration",add:"Add",delete:"delete",confirmTitle:"Sure to delete?",confirmContent:"It cannot be undone after deletion",affirm:"Affirm",cancel:"Cancel",submit:"Submit",basicConfiguration:"Task Base Configuration",detailedConfiguration:"Task Detailed Configuration",input:"Please enter",select:"Please select",name:"Task Name",command:"Task Command",labels:"Task Labels",schedule:"Timing Rule",search:"input search text",syncTasks:"Synchronizing Tasks",logTitle:"Task Log",noLogs:"No logs yet",table:{name:"Task Name",command:"Task Command",labels:"Task Labels",taskStatus:"Running Status",depictsStatus:"Detailed Status",action:"Action",schedule:"Timing Rule",lastExecutionTime:"Last Run",lastRunningTime:"Runtime"},confirm:{runTitle:"Confirm Run",runContent:"Are you sure you want to run the selected task?",stopTitle:"Confirm stop",stopContent:"Are you sure to stop the selected task?",enableTitle:"Confirm enabled",enableContent:"Are you sure to enable the selected task?",disableTitle:"Confirm disabled",disableContent:"Are you sure to disable the selected task?",pinTitle:"Confirm top placement",pinContent:"Do you confirm the task of the top selection?",unpinTitle:"Confirm the cancellation of the top",unpinContent:"Are you sure to cancel the top selection task?"}}}}},6892:function(e,t,a){"use strict";var n=a("3a5f"),r=a.n(n);r.a},7644:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("07ac"),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__),D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5530"),D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2909");__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},selectedRows:Array,expandedRowKeys:Array,expandedRowRender:Function,scroll:Object},data:function(){return{needTotalList:[]}},methods:{equals:function(e,t){if(e===t)return!0;var a=this.rowKey;return a&&"string"===typeof a?e[a]===t[a]:!(!a||"function"!==typeof a)&&a(e)===a(t)},contains:function(e,t){if(!e||0===e.length)return!1;for(var a=this.equals,n=0;n<e.length;n++)if(a(e[n],t))return!0;return!1},onSelectAll:function(e,t){var a=this,n=this.getKey,r=this.contains,s=this.dataSource.filter((function(e){return!r(t,e,a.rowKey)})),i=this.selectedRows.filter((function(e){return!r(s,e,a.rowKey)})),o={};i.forEach((function(e){return o[n(e)]=e})),t.forEach((function(e){return o[n(e)]=e}));var c=Object.values(o);this.$emit("update:selectedRows",c),this.$emit("selectedRowChange",c.map((function(e){return n(e)})),c)},getKey:function(e){var t=this.rowKey;if(t&&e)return"string"===typeof t?e[t]:t(e)},onSelect:function(e,t){var a=this.equals,n=this.selectedRows,r=this.getKey,s=t?[].concat(Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__["a"])(n),[e]):n.filter((function(t){return!a(t,e)}));this.$emit("update:selectedRows",s),this.$emit("selectedRowChange",s.map((function(e){return r(e)})),s)},initTotalList:function(e){return e.filter((function(e){return e.needTotal})).map((function(e){return Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},e),{},{total:0})}))},onClear:function(){this.$emit("update:selectedRows",[]),this.$emit("selectedRowChange",[],[]),this.$emit("clear")},onChange:function(e,t,a,n){var r=n.currentDataSource;this.$emit("change",e,t,a,{currentDataSource:r})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows2){this.needTotalList=this.needTotalList.map((function(item){return Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},item),{},{total:_selectedRows2.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return e.getKey(t)}))}}}},d58f:function(e,t,a){var n=a("1c0b"),r=a("7b0b"),s=a("44ad"),i=a("50c4"),o=function(e){return function(t,a,o,c){n(a);var l=r(t),u=s(l),d=i(l.length),_=e?d-1:0,p=e?-1:1;if(o<2)while(1){if(_ in u){c=u[_],_+=p;break}if(_+=p,e?_<0:d<=_)throw TypeError("Reduce of empty array with no initial value")}for(;e?_>=0:d>_;_+=p)_ in u&&(c=a(c,u[_],_,l));return c}};e.exports={left:o(!1),right:o(!0)}}}]);