(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b4fe578"],{2472:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return u})),a.d(t,"c",(function(){return p})),a.d(t,"b",(function(){return h})),a.d(t,"a",(function(){return g}));a("96cf");var n=a("1da1"),r=a("7424"),i=a("b775");function o(){return s.apply(this,arguments)}function s(){return s=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])(r["QL_DEPICT"],i["a"].GET));case 1:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}function c(e){return l.apply(this,arguments)}function l(){return l=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])(r["QL_DEPICT"],i["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])(r["QL_DEPICT"],i["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])(r["QL_DEPICT_ENABLE"]+t,i["a"].PUT));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return m=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])(r["QL_DEPICT_DISABLE"]+t,i["a"].PUT));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return b=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(i["f"])(r["QL_DEPICT"]+t,i["a"].DELETE));case 1:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},"3cb5":function(e,t,a){},"4bd1":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-card",{staticClass:"result-success"},[a("div",{staticClass:"table-operations"},[a("a-row",{attrs:{gutter:24,type:"flex",justify:"space-around",align:"middle"}},[a("a-col",{staticClass:"cores-bottom",attrs:{md:12,sm:24}},[a("a-space",{attrs:{size:10}},[a("a-button",{attrs:{type:"primary",icon:"plus",disabled:e.checkAddDisabled()},on:{click:function(t){e.operate.addShow=!0}}},[e._v(e._s(e.$t("add")))]),a("a-select",{staticStyle:{width:"120px"},attrs:{disabled:e.operate.disable,placeholder:e.$t("operate.container")},on:{select:e.onConfigList},model:{value:e.operate.qlId,callback:function(t){e.$set(e.operate,"qlId",t)},expression:"operate.qlId"}},[e._l(e.operate.qlNameMapper,(function(t,n){return[a("a-select-option",{key:n,attrs:{value:n,title:t}},[e._v(" "+e._s(t)+" ")])]}))],2),a("a-select",{staticStyle:{width:"150px"},attrs:{disabled:e.operate.disable,placeholder:e.$t("operate.filename")},on:{select:e.configChange},model:{value:e.operate.filename,callback:function(t){e.$set(e.operate,"filename",t)},expression:"operate.filename"}},[e._l(e.operate.configNameList,(function(t){return[a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v(" "+e._s(t.title)+" ")])]}))],2)],1)],1),a("a-col",{staticClass:"cores-bottom",staticStyle:{"text-align":"right"},attrs:{flex:"right",md:12,sm:24}},[a("a-space",{attrs:{size:10}},[a("QLBox",{ref:"qlBox",attrs:{"all-ql-id":e.operate.allQlId,"plain-options":e.operate.plainOptions}}),a("a-button",{attrs:{type:"primary",icon:"highlight",disabled:e.checkDisabled()},on:{click:e.saveConfig}},[e._v(e._s(e.$t("operate.save")))])],1)],1)],1)],1),a("div",{staticClass:"monaco-box"},[a("MonacoEditor",{ref:"child",attrs:{codes:e.code.value,filename:e.code.filename}})],1)]),a("a-modal",{attrs:{title:e.$t("addTitle"),width:450,destroyOnClose:!0},on:{ok:e.addConfigClose},model:{value:e.operate.addShow,callback:function(t){e.$set(e.operate,"addShow",t)},expression:"operate.addShow"}},[a("a-form",{attrs:{form:e.form,layout:"inline"}},[a("a-row",{attrs:{gutter:24,type:"flex",justify:"space-around",align:"middle"}},[a("a-col",{attrs:{md:18,sm:24}},[a("a-form-item",{attrs:{label:e.$t("filename")}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["filename",{rules:[{required:!0,message:e.$ta("input|filename"),whitespace:!0}]}],expression:"['filename', {rules: [{ required: true, message: $ta('input|filename'), whitespace: true}]}]"}],attrs:{placeholder:e.$ta("input|filename")}})],1)],1)],1)],1)],1)],1)},r=[],i=(a("b0c0"),a("b64b"),a("dc9e")),o=a("2472"),s=(a("96cf"),a("1da1")),c=a("7424"),l=a("b775");function u(e){return d.apply(this,arguments)}function d(){return d=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l["f"])(c["QL_CONFIG"].BASE,l["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return f=Object(s["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l["f"])(c["QL_CONFIG"].BASE+t,l["a"].GET));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e,t){return m.apply(this,arguments)}function m(){return m=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(l["f"])(c["QL_CONFIG"].BASE+t+"/"+a,l["a"].GET));case 1:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}var g=a("498a"),b={name:"Config",i18n:a("aa91"),components:{MonacoEditor:i["a"],QLBox:g["a"]},data:function(){return{form:this.$form.createForm(this),operate:{disable:!1,allQlId:[],selectValue:[],plainOptions:[],qlNameMapper:{},configNameList:{},qlId:void 0,filename:void 0,tmp:{is:!0,qlId:void 0},addShow:!1},code:{value:"",filename:""},options:{selectOnLineNumbers:!0,roundedSelection:!1,readOnly:!0,writeOnly:!1,cursorStyle:"line",automaticLayout:!0,glyphMargin:!0,useTabStops:!1,fontSize:32,autoIndent:!0,theme:"hc-black"}}},methods:{onConfigList:function(e){this.operate.tmp.is=!1,this.configList(e)},configList:function(e){var t=this;this.$set(this.operate,"disable",!0),p(e).then((function(a){var n,r,i=null!==(n=null===a||void 0===a||null===(r=a.data)||void 0===r?void 0:r.data)&&void 0!==n?n:[];t.$set(t.operate,"configNameList",i),i.length>0&&(t.$set(t.operate,"filename",i[0].value),t.configContent(e,i[0].value))})).catch((function(){t.$set(t.operate,"disable",!1)}))},configContent:function(e,t){var a=this;this.$set(this.operate,"disable",!0),h(e,t).then((function(e){var n,r,i=null!==(n=null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.data)&&void 0!==n?n:"";a.$set(a.code,"value",i),a.$set(a.code,"filename",t),a.$nextTick((function(){a.$refs.child.changeModel()})),a.$set(a.operate,"disable",!1)})).catch((function(){a.$set(a.operate,"disable",!1)}))},configChange:function(e){this.configContent(this.operate.tmp.is?this.operate.tmp.qlId:this.operate.qlId,e)},addConfigClose:function(){var e=this;this.form.validateFields((function(t,a){t||u({content:"",name:a.filename,qlId:e.$refs.qlBox.getSelectValue()}).then((function(t){200===t.data.code?(e.$message.success(t.data.message),e.operate.addShow=!1,e.configList(e.operate.tmp.is?e.operate.tmp.qlId:e.operate.qlId)):e.$message.error(t.data.message)})).catch((function(t){e.$message.error(t.message)}))}))},checkDisabled:function(){var e;return this.operate.disable||0===(null===(e=this.$refs.qlBox)||void 0===e?void 0:e.getSelectValue().length)},checkAddDisabled:function(){var e;return 0===(null===(e=this.$refs.qlBox)||void 0===e?void 0:e.getSelectValue().length)||0===Object.keys(this.operate.qlNameMapper).length},saveConfig:function(){var e=this;u({content:this.$refs.child.getValueCode(),name:this.operate.filename,qlId:this.$refs.qlBox.getSelectValue()}).then((function(t){200===t.data.code?e.$message.success(t.data.message):e.$message.error(t.data.message)})).catch((function(t){e.$message.error(t.message)}))}},mounted:function(){var e=this;Object(o["d"])().then((function(t){var a=t.data.data;if(a){for(var n=0;n<a.length;n++)a[n].enable&&(e.operate.plainOptions.push({label:a[n].name,value:a[n].id}),e.$set(e.operate.qlNameMapper,a[n].id,a[n].name),e.operate.selectValue.push(a[n].id),e.operate.allQlId.push(a[n].id),e.operate.qlId||(e.$set(e.operate,"qlId",a[n].name),e.operate.tmp.qlId=a[n].id,e.configList(a[n].id)));e.$nextTick((function(){e.$refs.qlBox.setSelectValue(e.operate.selectValue)}))}}))}},v=b,y=(a("bc55"),a("0c7c")),w=Object(y["a"])(v,n,r,!1,null,"31cdf392",null);t["default"]=w.exports},a0da:function(e,t,a){"use strict";var n=a("3cb5"),r=a.n(n);r.a},aa91:function(e,t){e.exports={messages:{CN:{operate:{container:"请选择容器",filename:"请选择配置文件",syncConfig:"请选择要同步到的容器",save:"保存"},addTitle:"添加配置文件",add:"添加",input:"请输入",select:"选择",filename:"文件名"},HK:{operate:{container:"請選擇容器",filename:"請選擇配置文件",syncConfig:"請選擇要同步到的容器",save:"保存"},addTitle:"添加配置文件",add:"添加",input:"請輸入",select:"選擇",filename:"文件名"},US:{operate:{container:"Please select container",filename:"Select a configuration file",syncConfig:"Select the container you want to sync to",save:"save"},addTitle:"Adding Configuration Files",add:"Add",input:"Please enter",select:"select",filename:"File Name"}}}},bc55:function(e,t,a){"use strict";var n=a("d590"),r=a.n(n);r.a},d590:function(e,t,a){},dc9e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"monaco-editor-box"}},[a("div",{ref:"monacoEditor",style:{height:e.height,width:"100%"}})])},r=[],i=(a("ac1f"),a("1276"),a("5530")),o=a("33f9"),s=a("5880"),c={name:"MonacoEditor",components:{},props:{types:{type:String,default:"javascript"},name:{type:String,default:"test"},filename:{type:String,default:"text.sh"},height:{default:"1200px"},editorOptions:{type:Object,default:function(){return{automaticLayout:!0,useTabStops:!1,fontSize:12,autoIndent:"brackets",lineDecorationsWidth:0}}},codes:{type:String,default:function(){return""}}},data:function(){return{editor:null,isSave:!0,codeValue:null}},watch:{codes:function(e){this.editor&&e!==this.editor.getValue()&&(this.editor.setValue(e),this.editor.trigger(this.editor.getValue(),"editor.action.formatDocument"))},types:function(e){this.editor&&o["editor"].setModelLanguage(this.editor.getModel(),e)},filename:function(){this.editor&&this.changeModel()}},mounted:function(){this.initEditor()},beforeDestroy:function(){var e;null===(e=this.editor)||void 0===e||e.dispose()},computed:Object(i["a"])({filenameType:{get:function(){var e=this.filename.split(".");switch(e[e.length-1]){case"js":return"javascript";case"ts":return"typescript";case"py":return"python";case"html":return"html";case"json":return"json";case"sh":return"shell";case"xml":return"xml";case"yaml":case"yml":return"yaml";default:return"shell"}}}},Object(s["mapState"])("setting",["theme"])),methods:{initEditor:function(){var e=this;this.editor=o["editor"].create(e.$refs.monacoEditor,Object(i["a"])({value:e.codeValue||e.codes,language:e.filenameType},e.editorOptions)),e.editor.onDidChangeModelContent((function(t){e.codesCopy=e.editor.getValue()}))},changeModel:function(){o["editor"].setModelLanguage(this.editor.getModel(),this.filenameType)},getValueCode:function(){return this.editor.getValue()}}},l=c,u=(a("a0da"),a("0c7c")),d=Object(u["a"])(l,n,r,!1,null,"18b7ff3c",null);t["a"]=d.exports}}]);