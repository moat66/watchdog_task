(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-69a5a109"],{"04a6":function(e,t,n){},"2eec":function(e,t){e.exports={messages:{CN:{operate:{delete:"删除"},confirm:{deleteTitle:"确定删除？",deleteContent:"你确认要删除选择的日志文件或文件夹下的所有内容吗？"},selectLog:"请选择日志文件",noLog:"暂无日志"},HK:{operate:{delete:"刪除"},confirm:{deleteTitle:"確定刪除？",deleteContent:"您確定要刪除選擇的日誌文件或文件夾下的所有內容嗎？"},selectLog:"請選擇日誌文件",noLog:"暫無日誌"},US:{operate:{delete:"Delete"},confirm:{deleteTitle:"Confirm Deletion?",deleteContent:"Are you sure you want to delete all the contents of the selected log file or folder?"},selectLog:"Please select a log file",noLog:"No logs available"}}}},"42c6":function(e,t,n){"use strict";var a=n("b653"),r=n.n(a);r.a},7443:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{disabled:e.disable},on:{pressEnter:function(t){return e.onSearch(e.searchValue)},search:function(t){return e.onSearch(e.searchValue)}},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),n("div",{staticClass:"left-tree-scroller left-tree-container"},[n("a-tree",{staticClass:"left-tree",attrs:{expandedKeys:e.expandedKeys,"show-line":!0,disabled:e.disable,"tree-data":e.fileTreeData},on:{"update:expandedKeys":function(t){e.expandedKeys=t},"update:expanded-keys":function(t){e.expandedKeys=t},select:e.onSelect}})],1)],1)},r=[],i=(n("c975"),n("c695")),s=n.n(i),o={name:"FileListTree",props:{disable:{type:Boolean,default:!1},onSelect:{type:Function,default:function(){}},treeData:{type:Array,default:function(){return[]}}},data:function(){return{searchValue:"",expandedKeys:[],fileTreeData:[],timeout:null}},methods:{debounce:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e()}),t)},onSearch:function(e){var t=this;this.expandedKeys=[],e?this.debounce((function(){t.fileTreeData=s.a.searchTree(t.treeData,(function(n){return n.title.toLowerCase().indexOf(e.toLowerCase())>-1&&(n.parent&&t.expandedKeys.push(n.parent),t.expandedKeys.push(n.key),!0)}),{children:"children"})})):this.fileTreeData=this.treeData}}},c=o,l=(n("42c6"),n("0c7c")),u=Object(l["a"])(c,a,r,!1,null,"6c30c790",null);t["a"]=u.exports},"8a79":function(e,t,n){"use strict";var a=n("23e7"),r=n("06cf").f,i=n("50c4"),s=n("5a34"),o=n("1d80"),c=n("ab13"),l=n("c430"),u="".endsWith,d=Math.min,p=c("endsWith"),f=!l&&!p&&!!function(){var e=r(String.prototype,"endsWith");return e&&!e.writable}();a({target:"String",proto:!0,forced:!f&&!p},{endsWith:function(e){var t=String(o(this));s(e);var n=arguments.length>1?arguments[1]:void 0,a=i(t.length),r=void 0===n?a:d(i(n),a),c=String(e);return u?u.call(t,c,r):t.slice(r-c.length,r)===c}})},b653:function(e,t,n){},cb96:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-card",{staticClass:"result-success"},[n("div",{staticStyle:{height:"1200px"}},[n("split-pane",{attrs:{split:"vertical","min-percent":10,"default-percent":15}},[n("template",{slot:"paneL"},[n("FileListTree",{ref:"tree",attrs:{disable:e.operate.disable,onSelect:e.onSelect,treeData:e.script.treeData}})],1),n("template",{slot:"paneR"},[n("div",{staticClass:"table-operations"},[n("a-row",{attrs:{gutter:24,type:"flex",justify:"space-around",align:"middle"}},[n("a-col",{staticClass:"cores-bottom",staticStyle:{"text-align":"right"},attrs:{flex:"right",md:24,sm:24}},[n("a-space",{attrs:{size:10}},[n("a-button",{attrs:{type:"danger",disabled:0===e.script.logKey.length,icon:"delete"},on:{click:e.deleteTaskLog}},[e._v(e._s(e.$t("operate.delete")))])],1)],1)],1)],1),n("div",{staticClass:"monaco-box",staticStyle:{"margin-top":"15px"}},[n("MonacoEditor",{ref:"child",attrs:{codes:e.script.content,filename:e.script.filename}})],1)])],2)],1)])],1)},r=[],i=(n("caad"),n("baa5"),n("8a79"),n("2532"),n("dc9e")),s=n("7443"),o=n("19ab"),c=n.n(o),l=(n("96cf"),n("1da1")),u=n("7424"),d=n("b775");function p(){return f.apply(this,arguments)}function f(){return f=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["TASK"].LOG,d["a"].GET));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function h(e){return g.apply(this,arguments)}function g(){return g=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["TASK"].LOG_CONTENT,d["a"].GET,t));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return v=Object(l["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(d["f"])(u["TASK"].LOG,d["a"].DELETE,t));case 1:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var b={name:"TaskLog",i18n:n("2eec"),components:{MonacoEditor:i["a"],splitPane:c.a,FileListTree:s["a"]},data:function(){return{script:{treeData:[],content:this.$t("selectLog"),filename:"sh.log",logKey:""},operate:{searchValue:"",disable:!1}}},methods:{onSelect:function(e){var t,n=this;this.$set(this.script,"logKey",null!==(t=null===e||void 0===e?void 0:e[0])&&void 0!==t?t:""),0!==e.length&&(this.$set(this.script,"filename",e[0].includes("/")?e[0].substring(e[0].lastIndexOf("/")+1):e[0]),this.$set(this.script,"content",this.$t("selectLog")),e[0].endsWith(".log")&&(this.$set(this.operate,"disable",!0),h({logPath:e[0]}).then((function(e){var t,a,r=200===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.code)?null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.data:n.$t("noLog");n.$set(n.script,"content",r),n.$nextTick((function(){n.$refs.child.changeModel()})),n.$set(n.operate,"disable",!1)})).catch((function(e){n.$message.error(e.message),n.$set(n.operate,"disable",!1)}))))},deleteTaskLog:function(){var e=this;this.confirmPop("confirm.deleteTitle","confirm.deleteContent",(function(){m({logPath:e.script.logKey}).then((function(t){var n;200===(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.code)?(e.getData(),e.$message.success(t.data.message)):e.$message.error(t.data.message)}))}))},confirmPop:function(e,t,n){this.$confirm({title:this.$t(e),content:this.$t(t),onOk:n})},getData:function(){var e=this;p().then((function(t){var n,a,r=null!==(n=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.data)&&void 0!==n?n:[];e.$refs.tree.fileTreeData=r,e.$set(e.script,"treeData",r),e.$set(e.script,"logKey","")}))}},mounted:function(){this.getData()}},y=b,x=(n("ccf6"),n("0c7c")),T=Object(x["a"])(y,a,r,!1,null,"924df478",null);t["default"]=T.exports},ccf6:function(e,t,n){"use strict";var a=n("04a6"),r=n.n(a);r.a}}]);