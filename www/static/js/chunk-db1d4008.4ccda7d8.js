(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db1d4008"],{"13d5":function(e,t,n){"use strict";var r=n("23e7"),a=n("d58f").left,i=n("a640"),o=n("ae40"),s=i("reduce"),c=o("reduce",{1:0});r({target:"Array",proto:!0,forced:!s||!c},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"25a5":function(e,t){e.exports={messages:{CN:{operate:{add:"添加",delete:"删除",enable:"启用",disable:"禁用",more:"更多"},form:{name:"接口名称",uri:"唯一标识",text:"接口数据内容",imgPath:"选择图片",limitEnable:"限流",enable:"启用",second:"窗口时间",frequency:"限制频率",remark:"备注",types:"响应类型",type:{text:"文本",json:"JSON",xml:"XML",html:"HTML",img:"图片"}},updateTitle:"更新开放接口信息",saveTitle:"添加开放接口信息",confirm:{deleteTitle:"确定删除？",deleteContent:"你确认要删除选择的开放接口信息吗？",enableTitle:"确定启用？",enableContent:"你确认要启用选择的开放接口信息吗？",disableTitle:"确定禁用？",disableContent:"你确认要禁用选择的开放接口信息吗？"},table:{name:"名称",uri:"唯一标识",text:"数据内容",type:"响应类型",limitEnable:"频率限制",enable:"开关",second:"窗口时间",frequency:"请求频次",remark:"备注",action:"操作",types:{1:"文本",2:"JSON",3:"XML",4:"HTML",5:"图片"}},add:"添加",input:"请输入",select:"请选择",cancel:"取消",submit:"提交"},HK:{operate:{add:"新增",delete:"刪除",enable:"啟用",disable:"禁用",more:"更多"},form:{name:"介面名稱",uri:"唯一標識",text:"介面資料內容",imgPath:"選擇圖片",limitEnable:"限流",enable:"啟用",second:"窗口時間",frequency:"限制頻率",remark:"備註",types:"回應類型",type:{text:"文本",json:"JSON",xml:"XML",html:"HTML",img:"圖片"}},updateTitle:"更新開放介面資訊",saveTitle:"新增開放介面資訊",confirm:{deleteTitle:"確定刪除？",deleteContent:"你確認要刪除選擇的開放介面資訊嗎？",enableTitle:"確定啟用？",enableContent:"你確認要啟用選擇的開放介面資訊嗎？",disableTitle:"確定禁用？",disableContent:"你確認要禁用選擇的開放介面資訊嗎？"},table:{name:"名稱",uri:"唯一標識",text:"資料內容",type:"回應類型",limitEnable:"頻率限制",enable:"開關",second:"窗口時間",frequency:"請求頻次",remark:"備註",action:"操作",types:{1:"文本",2:"JSON",3:"XML",4:"HTML",5:"圖片"}},add:"新增",input:"請輸入",select:"請選擇",cancel:"取消",submit:"提交"},US:{operate:{add:"Add",delete:"Delete",enable:"Enable",disable:"Disable",more:"More"},form:{name:"Interface Name",uri:"Unique Identifier",text:"Interface Data Content",imgPath:"Select Image",limitEnable:"Rate Limit",enable:"Enable",second:"Window Time",frequency:"Request Frequency",remark:"Remark",types:"Response Type",type:{text:"Text",json:"JSON",xml:"XML",html:"HTML",img:"Image"}},updateTitle:"Update Open Interface Information",saveTitle:"Add Open Interface Information",confirm:{deleteTitle:"Confirm Delete?",deleteContent:"Are you sure you want to delete the selected open interface information?",enableTitle:"Confirm Enable?",enableContent:"Are you sure you want to enable the selected open interface information?",disableTitle:"Confirm Disable?",disableContent:"Are you sure you want to disable the selected open interface information?"},table:{name:"Name",uri:"Unique Identifier",text:"Data Content",type:"Response Type",limitEnable:"Rate Limit",enable:"Switch",second:"Window Time",frequency:"Request Frequency",remark:"Remark",action:"Action",types:{1:"Text",2:"JSON",3:"XML",4:"HTML",5:"Image"}},add:"Add",input:"Please enter",select:"Please select",cancel:"Cancel",submit:"Submit"}}}},3521:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"standard-table"},[n("a-table",{attrs:{bordered:e.bordered,loading:e.loading,columns:e.columns,dataSource:e.dataSource,rowKey:e.rowKey,pagination:e.pagination,expandedRowKeys:e.expandedRowKeys,expandedRowRender:e.expandedRowRender,scroll:e.scroll,rowSelection:e.selectedRows?{selectedRowKeys:e.selectedRowKeys,onSelect:e.onSelect,onSelectAll:e.onSelectAll}:void 0},on:{change:e.onChange},scopedSlots:e._u([e._l(Object.keys(e.$scopedSlots).filter((function(e){return"expandedRowRender"!==e})),(function(t){return{key:t,fn:function(n,r,a){return[e._t(t,null,null,{text:n,record:r,index:a})]}}})),{key:e.$scopedSlots.expandedRowRender?"expandedRowRender":"",fn:function(t,n,r,a){return[e._t(e.$scopedSlots.expandedRowRender?"expandedRowRender":"",null,null,{record:t,index:n,indent:r,expanded:a})]}}],null,!0)},[e._l(Object.keys(e.$slots),(function(t){return n("template",{slot:t},[e._t(t)],2)}))],2)],1)},a=[],i=n("7644"),o=i["a"],s=(n("6892"),n("0c7c")),c=Object(s["a"])(o,r,a,!1,null,"11bb3bd6",null);t["a"]=c.exports},"3a5f":function(e,t,n){},"3cb5":function(e,t,n){},"5e19":function(e,t,n){},"66fc":function(e,t,n){"use strict";var r=n("5e19"),a=n.n(r);a.a},6892:function(e,t,n){"use strict";var r=n("3a5f"),a=n.n(r);a.a},7644:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("99af"),core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es_array_concat__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("4de4"),core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es_array_filter__WEBPACK_IMPORTED_MODULE_1__),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("4160"),core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(core_js_modules_es_array_for_each__WEBPACK_IMPORTED_MODULE_2__),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("d81d"),core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(core_js_modules_es_array_map__WEBPACK_IMPORTED_MODULE_3__),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("13d5"),core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(core_js_modules_es_array_reduce__WEBPACK_IMPORTED_MODULE_4__),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("07ac"),core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(core_js_modules_es_object_values__WEBPACK_IMPORTED_MODULE_5__),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("159b"),core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6___default=__webpack_require__.n(core_js_modules_web_dom_collections_for_each__WEBPACK_IMPORTED_MODULE_6__),D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("5530"),D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("2909");__webpack_exports__["a"]={name:"StandardTable",props:{bordered:Boolean,loading:[Boolean,Object],columns:Array,dataSource:Array,rowKey:{type:[String,Function],default:"key"},pagination:{type:[Object,Boolean],default:!0},selectedRows:Array,expandedRowKeys:Array,expandedRowRender:Function,scroll:Object},data:function(){return{needTotalList:[]}},methods:{equals:function(e,t){if(e===t)return!0;var n=this.rowKey;return n&&"string"===typeof n?e[n]===t[n]:!(!n||"function"!==typeof n)&&n(e)===n(t)},contains:function(e,t){if(!e||0===e.length)return!1;for(var n=this.equals,r=0;r<e.length;r++)if(n(e[r],t))return!0;return!1},onSelectAll:function(e,t){var n=this,r=this.getKey,a=this.contains,i=this.dataSource.filter((function(e){return!a(t,e,n.rowKey)})),o=this.selectedRows.filter((function(e){return!a(i,e,n.rowKey)})),s={};o.forEach((function(e){return s[r(e)]=e})),t.forEach((function(e){return s[r(e)]=e}));var c=Object.values(s);this.$emit("update:selectedRows",c),this.$emit("selectedRowChange",c.map((function(e){return r(e)})),c)},getKey:function(e){var t=this.rowKey;if(t&&e)return"string"===typeof t?e[t]:t(e)},onSelect:function(e,t){var n=this.equals,r=this.selectedRows,a=this.getKey,i=t?[].concat(Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_8__["a"])(r),[e]):r.filter((function(t){return!n(t,e)}));this.$emit("update:selectedRows",i),this.$emit("selectedRowChange",i.map((function(e){return a(e)})),i)},initTotalList:function(e){return e.filter((function(e){return e.needTotal})).map((function(e){return Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},e),{},{total:0})}))},onClear:function(){this.$emit("update:selectedRows",[]),this.$emit("selectedRowChange",[],[]),this.$emit("clear")},onChange:function(e,t,n,r){var a=r.currentDataSource;this.$emit("change",e,t,n,{currentDataSource:a})}},created:function(){this.needTotalList=this.initTotalList(this.columns)},watch:{selectedRows:function selectedRows(_selectedRows2){this.needTotalList=this.needTotalList.map((function(item){return Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])(Object(D_code_webstorm_vue_antd_admin_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_7__["a"])({},item),{},{total:_selectedRows2.reduce((function(sum,val){var v;try{v=val[item.dataIndex]?val[item.dataIndex]:eval("val.".concat(item.dataIndex))}catch(_){v=val[item.dataIndex]}return v=isNaN(parseFloat(v))?0:parseFloat(v),sum+v}),0)})}))}},computed:{selectedRowKeys:function(){var e=this;return this.selectedRows.map((function(t){return e.getKey(t)}))}}}},a0da:function(e,t,n){"use strict";var r=n("3cb5"),a=n.n(r);a.a},be79:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-drawer",{attrs:{title:e.isUpdate?e.$t("updateTitle"):e.$t("saveTitle"),width:e.widths,visible:e.visible,"body-style":{paddingBottom:"80px"}},on:{close:e.onClose}},[n("a-form",{attrs:{form:e.form,layout:"vertical"}},[n("a-row",{attrs:{gutter:24}},[n("a-col",{attrs:{md:12,sm:24,hidden:""}},[n("a-form-item",[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1)],1),n("a-col",{attrs:{md:12,sm:24}},[n("a-form-item",{attrs:{label:e.$t("form.name")}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:e.$ta("input|form.name"),whitespace:!0}]}],expression:"['name', {rules: [{ required: true, message: $ta('input|form.name'), whitespace: true}]}]"}],attrs:{placeholder:e.$ta("input|form.name")}})],1)],1),n("a-col",{attrs:{md:12,sm:24}},[n("a-form-item",{attrs:{label:e.$t("form.uri")}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["uri",{rules:[{required:!0,message:e.$ta("input|form.uri"),whitespace:!0}]}],expression:"['uri', {rules: [{ required: true, message: $ta('input|form.uri'), whitespace: true}]}]"}],attrs:{placeholder:e.$ta("input|form.uri")}})],1)],1),n("a-col",{attrs:{sm:24}},[n("a-form-item",{attrs:{label:e.$t("form.types")}},[n("a-select",{attrs:{placeholder:e.$ta("select|form.types")},model:{value:e.formType,callback:function(t){e.formType=t},expression:"formType"}},[n("a-select-option",{attrs:{value:1}},[e._v(" "+e._s(e.$t("form.type.text"))+" ")]),n("a-select-option",{attrs:{value:2}},[e._v(" "+e._s(e.$t("form.type.json"))+" ")]),n("a-select-option",{attrs:{value:3}},[e._v(" "+e._s(e.$t("form.type.xml"))+" ")]),n("a-select-option",{attrs:{value:4}},[e._v(" "+e._s(e.$t("form.type.html"))+" ")]),n("a-select-option",{attrs:{value:5}},[e._v(" "+e._s(e.$t("form.type.img"))+" ")])],1)],1)],1),n("a-col",{attrs:{sm:24,hidden:5===e.formType}},[n("div",{ref:"table",style:{"background-color":"white",padding:e.paddingValue},attrs:{id:e.id}},[n("a-form-item",[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("a-space",{attrs:{size:10}},[n("span",{staticClass:"custom-label"},[e._v(e._s(e.$t("form.text")))]),n("a-tooltip",{attrs:{title:"全屏"}},[n("a-icon",{staticClass:"action",attrs:{type:e.fullScreen?"fullscreen-exit":"fullscreen"},on:{click:e.toggleScreen}})],1)],1)],1),n("MonacoEditor",{ref:"child",attrs:{codes:e.codes,types:e.codeType,height:e.height}})],1)],1)]),n("a-col",{attrs:{sm:24,hidden:5!==e.formType}},[n("a-form-item",{attrs:{label:e.$t("form.imgPath")}},[n("a-tree-select",{staticStyle:{width:"100%"},attrs:{"dropdown-style":{maxHeight:"400px",overflow:"auto"},"tree-data":e.treeData,placeholder:e.$ta("select|form.imgPath")},model:{value:e.codes,callback:function(t){e.codes=t},expression:"codes"}})],1)],1),n("a-col",{attrs:{sm:12}},[n("a-form-item",{attrs:{label:e.$t("form.enable")}},[n("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["enable"],expression:"['enable']"}],attrs:{"checked-children":"开","un-checked-children":"关",checked:e.form.getFieldValue("enable")}})],1)],1),n("a-col",{attrs:{sm:12}},[n("a-form-item",{attrs:{label:e.$t("form.limitEnable")}},[n("a-switch",{directives:[{name:"decorator",rawName:"v-decorator",value:["limitEnable"],expression:"['limitEnable']"}],attrs:{"checked-children":"开","un-checked-children":"关",checked:e.form.getFieldValue("limitEnable")}})],1)],1),e.form.getFieldValue("limitEnable")?n("a-col",{attrs:{md:12,sm:24}},[n("a-form-item",{attrs:{label:e.$t("form.second")}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["form.second",{rules:[{required:!0,type:"number",message:e.$ta("input|form.second"),whitespace:!0}]}],expression:"['form.second', {rules: [{ required: true, type: 'number', message: $ta('input|form.second'), whitespace: true}]}]"}],style:{width:"100%"},attrs:{placeholder:e.$ta("input|form.second")}})],1)],1):e._e(),e.form.getFieldValue("limitEnable")?n("a-col",{attrs:{md:12,sm:24}},[n("a-form-item",{attrs:{label:e.$t("form.frequency")}},[n("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["form.frequency",{rules:[{required:!0,type:"number",message:e.$ta("input|form.frequency"),whitespace:!0}]}],expression:"['form.frequency', {rules: [{ required: true, type: 'number', message: $ta('input|form.frequency'), whitespace: true}]}]"}],style:{width:"100%"},attrs:{placeholder:e.$ta("input|form.frequency")}})],1)],1):e._e(),n("a-col",{attrs:{sm:24}},[n("a-form-item",{attrs:{label:e.$t("form.remark")}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:4,placeholder:e.$ta("input|form.remark")}})],1)],1)],1)],1),n("div",{style:{position:"absolute",right:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right",zIndex:1}},[n("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" "+e._s(e.$t("cancel"))+" ")]),n("a-button",{attrs:{type:"primary",loading:e.isSubmit},on:{click:e.onSubmit}},[e._v(" "+e._s(e.$t("submit"))+" ")])],1)],1),n("a-card",{staticClass:"result-success"},[n("div",{staticClass:"table-operations"},[n("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:e.toAdd}},[e._v(e._s(e.$t("operate.add")))]),n("a-dropdown",{attrs:{disabled:0===e.selectedRows.length}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:e.openApiEvent},slot:"overlay"},[n("a-menu-item",{key:"delete"},[e._v(" "+e._s(e.$t("operate.delete"))+" ")]),n("a-menu-item",{key:"enable"},[e._v(" "+e._s(e.$t("operate.enable"))+" ")]),n("a-menu-item",{key:"disable"},[e._v(" "+e._s(e.$t("operate.disable"))+" ")])],1),n("a-button",[e._v(" "+e._s(e.$t("operate.more"))+" "),n("a-icon",{attrs:{type:"down"}})],1)],1)],1),n("standard-table",{attrs:{columns:e.dataColumns,dataSource:e.dataSource,selectedRows:e.selectedRows,rowKey:function(e){return e.id},pagination:!1,scroll:{x:900}},on:{"update:selectedRows":function(t){e.selectedRows=t},"update:selected-rows":function(t){e.selectedRows=t}},scopedSlots:e._u([{key:"name",fn:function(t){var r=t.text;return[n("a",{on:{click:function(t){return e.copyValue(r)}}},[e._v(" "+e._s(r)+" ")])]}},{key:"uri",fn:function(t){var r=t.text;return[n("a",{attrs:{href:e.systemConfig["watchdog.server-path"]+"/api/open/"+r,target:"_blank"}},[e._v(" "+e._s(r)+" ")])]}},{key:"text",fn:function(t){var r=t.text;return[n("a",{on:{click:function(t){return e.copyValue(r)}}},[e._v(" "+e._s(r)+" ")])]}},{key:"type",fn:function(t){var r=t.text;return[n("a-tag",{attrs:{color:"blue"}},[e._v(" "+e._s(e.$t("table.types."+r))+" ")])]}},{key:"autoBypassFriend",fn:function(t){var r=t.text;return n("span",{},[n("a-tag",{attrs:{color:r?"cyan":"orange"}},[e._v(" "+e._s(r?"是":"否")+" ")])],1)}},{key:"limitEnable",fn:function(t){var r=t.text;return n("span",{},[n("a-tag",{attrs:{color:r?"cyan":"orange"}},[e._v(" "+e._s(r?"是":"否")+" ")])],1)}},{key:"autoBypassGroup",fn:function(t){var r=t.text;return n("span",{},[n("a-tag",{attrs:{color:r?"cyan":"orange"}},[e._v(" "+e._s(r?"是":"否")+" ")])],1)}},{key:"enable",fn:function(t){t.text;var r=t.record;return n("a-switch",{attrs:{"checked-children":"开","un-checked-children":"关",loading:e.isRunLoad&&r.id===e.isRunId,checked:r.enable},on:{click:function(t){return e.enableOrDisable(r)}}})}},{key:"remark",fn:function(t){var r=t.text;return[n("a",{on:{click:function(t){return e.copyValue(r)}}},[e._v(" "+e._s(r)+" ")])]}},{key:"action",fn:function(t){t.text;var r=t.record;return n("div",{},[n("a-space",{attrs:{size:8}},[n("a",{attrs:{type:"link"},on:{click:function(t){return e.toUpdate(r)}}},[n("a-icon",{attrs:{type:"edit"}})],1),e._v(" "),n("a",{attrs:{type:"link"},on:{click:function(t){return e.deleteOpenApi([r.id])}}},[n("a-icon",{attrs:{type:"delete"}})],1)])],1)}}])})],1)],1)},a=[],i=(n("99af"),n("d81d"),n("b0c0"),n("5530")),o=(n("96cf"),n("1da1")),s=n("dc9e"),c=n("3521"),l=n("7424"),u=n("b775");function d(){return _.apply(this,arguments)}function _(){return _=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["f"])(l["OPEN"].BASE,u["a"].GET));case 1:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return f=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["f"])(l["OPEN"].BASE,u["a"].POST,t));case 1:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["f"])(l["OPEN"].BASE,u["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return y=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["f"])(l["OPEN"].BASE,u["a"].DELETE,t));case 1:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return g=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["f"])(l["OPEN"].ENABLE,u["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function w(e){return E.apply(this,arguments)}function E(){return E=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["f"])(l["OPEN"].DISABLE,u["a"].PUT,t));case 1:case"end":return e.stop()}}),e)}))),E.apply(this,arguments)}function R(){return O.apply(this,arguments)}function O(){return O=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(u["f"])(l["OPEN"].IMG,u["a"].GET));case 1:case"end":return e.stop()}}),e)}))),O.apply(this,arguments)}var k=n("5880"),x=[{title:"名称",key:"name",width:90,align:"center",ellipsis:!0,dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"uri",key:"uri",width:150,align:"center",ellipsis:!0,dataIndex:"uri",scopedSlots:{customRender:"uri"}},{title:"数据内容",key:"text",width:150,align:"center",ellipsis:!0,dataIndex:"text",scopedSlots:{customRender:"text"}},{title:"响应类型",key:"type",width:100,align:"center",dataIndex:"type",scopedSlots:{customRender:"type"}},{title:"频率限制",key:"limitEnable",width:100,align:"center",dataIndex:"limitEnable",scopedSlots:{customRender:"limitEnable"}},{title:"窗口时间",key:"second",width:100,align:"center",dataIndex:"second"},{title:"请求频次",key:"frequency",width:100,align:"center",dataIndex:"frequency"},{title:"开关",key:"enable",width:80,align:"center",dataIndex:"enable",scopedSlots:{customRender:"enable"}},{title:"备注",key:"remark",width:150,align:"center",ellipsis:!0,dataIndex:"remark",scopedSlots:{customRender:"remark"}},{title:"操作",key:"action",width:80,align:"center",scopedSlots:{customRender:"action"}}],S={name:"OpenApi",components:{StandardTable:c["a"],MonacoEditor:s["a"]},i18n:n("25a5"),data:function(){return{id:"".concat((new Date).getTime(),"-").concat(Math.floor(10*Math.random())),fullScreen:!1,form:this.$form.createForm(this),visible:!1,dataSource:[],selectedRows:[],columns:x,isSubmit:!1,isRunLoad:!1,isRunId:0,isUpdate:!1,formType:1,height:"150px",paddingValue:"0px",types:{1:"shell",2:"json",3:"xml",4:"html"},codeType:"shell",codes:"",treeData:[]}},methods:{copyValue:function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),this.$message.success("复制成功")},openApiEvent:function(e){switch(e.key){case"delete":this.deleteOpenApi(this.selectedRows.map((function(e){return e.id})));break;case"enable":this.enableOpenApi(this.selectedRows);break;case"disable":this.disableOpenApi(this.selectedRows)}},toAdd:function(){var e=this;this.isUpdate=!1,this.visible=!0,this.$nextTick((function(){e.form.setFieldsValue({enable:!0,limitEnable:!1}),e.codes=void 0,e.formType=1}))},onClose:function(){this.form.resetFields(),this.visible=!1,this.codes=""},onSubmit:function(){var e=this;this.isSubmit=!0,this.form.validateFields((function(t,n){t?e.isSubmit=!1:(n.type=e.formType,n.text=e.types[e.formType]?e.$refs.child.getValueCode():e.codes,(e.isUpdate?p(n):m(n)).then((function(t){var r=t.data;if(200===r.code){if(e.$message.success(r.message),n.id){for(var a=0;a<e.dataSource.length;a++)if(e.dataSource[a].id===r.data.id){e.$set(e.dataSource,a,r.data);break}}else e.dataSource.push(r.data);e.visible=!1,e.form.resetFields()}else e.$message.error(r.message);e.isSubmit=!1})).catch((function(t){e.$message.error(t.message),e.isSubmit=!1})))}))},enableOrDisable:function(e){var t=this;this.isRunLoad=!0,this.isRunId=e.id,(e.enable?w([e.id]):v([e.id])).then((function(n){200===n.data.code?(t.$message.success(n.data.message),e.enable=!e.enable):t.$message.error(n.data.message),t.isRunLoad=!1})).catch((function(e){t.$message.error(e.message),t.isRunLoad=!1}))},toUpdate:function(e){var t=this;this.isUpdate=!0,this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue({id:e.id,enable:e.enable,frequency:e.frequency,limitEnable:e.limitEnable,name:e.name,remark:e.remark,second:e.second,uri:e.uri}),t.formType=e.type,t.codes=e.text}))},deleteOpenApi:function(e){var t=this;this.$confirm({title:this.$t("confirm.deleteTitle"),content:this.$t("confirm.deleteContent"),onOk:function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:b(e).then((function(e){200===e.data.code?(t.$message.success(e.data.message),t.getData()):t.$message.error(e.data.message)})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return n.stop()}}),n)})));function r(){return n.apply(this,arguments)}return r}()})},enableOpenApi:function(e){var t=this;this.confirmPop("confirm.enableTitle","confirm.enableContent",Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:v(e.map((function(e){return e.id}))).then((function(e){var n,r,a;200===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.code)?(t.$message.success(e.data.message),t.getData()):t.$message.error(null!==(r=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)&&void 0!==r?r:"操作失败")})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return n.stop()}}),n)}))))},disableOpenApi:function(e){var t=this;this.confirmPop("confirm.disableTitle","confirm.disableContent",Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:w(e.map((function(e){return e.id}))).then((function(e){var n,r,a;200===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.code)?(t.$message.success(e.data.message),t.getData()):t.$message.error(null!==(r=null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.message)&&void 0!==r?r:"操作失败")})).catch((function(e){t.$message.error(e.message)}));case 1:case"end":return n.stop()}}),n)}))))},toggleScreen:function(){this.fullScreen?this.outFullScreen():this.inFullScreen()},inFullScreen:function(){var e=this.$refs.table;return e.classList.add("beauty-scroll"),e.requestFullscreen?(e.requestFullscreen(),!0):e.webkitRequestFullScreen?(e.webkitRequestFullScreen(),!0):e.mozRequestFullScreen?(e.mozRequestFullScreen(),!0):e.msRequestFullscreen?(e.msRequestFullscreen(),!0):(this.$message.warn("对不起，您的浏览器不支持全屏模式"),e.classList.remove("beauty-scroll"),!1)},outFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.$refs.table.classList.remove("beauty-scroll")},addListener:function(){document.addEventListener("fullscreenchange",this.fullScreenListener),document.addEventListener("webkitfullscreenchange",this.fullScreenListener),document.addEventListener("mozfullscreenchange",this.fullScreenListener),document.addEventListener("msfullscreenchange",this.fullScreenListener)},removeListener:function(){document.removeEventListener("fullscreenchange",this.fullScreenListener),document.removeEventListener("webkitfullscreenchange",this.fullScreenListener),document.removeEventListener("mozfullscreenchange",this.fullScreenListener),document.removeEventListener("msfullscreenchange",this.fullScreenListener)},fullScreenListener:function(e){e.target.id===this.id&&(this.fullScreen?(this.height="150px",this.paddingValue="0px"):(this.height="800px",this.paddingValue="20px"),this.fullScreen=!this.fullScreen)},getData:function(){var e=this;d().then((function(t){var n,r;e.dataSource=null!==(n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.data)&&void 0!==n?n:[],e.selectedRows=[]}))},confirmPop:function(e,t,n){this.$confirm({title:this.$t(e),content:this.$t(t),onOk:n})}},mounted:function(){var e=this;this.getData(),R().then((function(t){var n,r;e.treeData=null!==(n=null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.data)&&void 0!==n?n:[]}))},created:function(){this.addListener()},beforeDestroy:function(){this.removeListener()},watch:{formType:function(e,t){this.types[e]&&this.types[t]||(this.codes=""),this.types[e]&&(this.codeType=this.types[e])}},computed:Object(i["a"])({widths:function(){return document.documentElement.clientWidth>720?720:document.documentElement.clientWidth},dataColumns:function(){var e=this;return this.columns.map((function(t){return t.title=e.$t("table."+t.key),t}))}},Object(k["mapGetters"])({systemConfig:"setting/systemConfig"}))},T=S,D=(n("66fc"),n("0c7c")),$=Object(D["a"])(T,r,a,!1,null,"06fda201",null);t["default"]=$.exports},d58f:function(e,t,n){var r=n("1c0b"),a=n("7b0b"),i=n("44ad"),o=n("50c4"),s=function(e){return function(t,n,s,c){r(n);var l=a(t),u=i(l),d=o(l.length),_=e?d-1:0,m=e?-1:1;if(s<2)while(1){if(_ in u){c=u[_],_+=m;break}if(_+=m,e?_<0:d<=_)throw TypeError("Reduce of empty array with no initial value")}for(;e?_>=0:d>_;_+=m)_ in u&&(c=n(c,u[_],_,l));return c}};e.exports={left:s(!1),right:s(!0)}},dc9e:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"monaco-editor-box"}},[n("div",{ref:"monacoEditor",style:{height:e.height,width:"100%"}})])},a=[],i=(n("ac1f"),n("1276"),n("5530")),o=n("33f9"),s=n("5880"),c={name:"MonacoEditor",components:{},props:{types:{type:String,default:"javascript"},name:{type:String,default:"test"},filename:{type:String,default:"text.sh"},height:{default:"1200px"},editorOptions:{type:Object,default:function(){return{automaticLayout:!0,useTabStops:!1,fontSize:12,autoIndent:"brackets",lineDecorationsWidth:0}}},codes:{type:String,default:function(){return""}}},data:function(){return{editor:null,isSave:!0,codeValue:null}},watch:{codes:function(e){this.editor&&e!==this.editor.getValue()&&(this.editor.setValue(e),this.editor.trigger(this.editor.getValue(),"editor.action.formatDocument"))},types:function(e){this.editor&&o["editor"].setModelLanguage(this.editor.getModel(),e)},filename:function(){this.editor&&this.changeModel()}},mounted:function(){this.initEditor()},beforeDestroy:function(){var e;null===(e=this.editor)||void 0===e||e.dispose()},computed:Object(i["a"])({filenameType:{get:function(){var e=this.filename.split(".");switch(e[e.length-1]){case"js":return"javascript";case"ts":return"typescript";case"py":return"python";case"html":return"html";case"json":return"json";case"sh":return"shell";case"xml":return"xml";case"yaml":case"yml":return"yaml";default:return"shell"}}}},Object(s["mapState"])("setting",["theme"])),methods:{initEditor:function(){var e=this;this.editor=o["editor"].create(e.$refs.monacoEditor,Object(i["a"])({value:e.codeValue||e.codes,language:e.filenameType},e.editorOptions)),e.editor.onDidChangeModelContent((function(t){e.codesCopy=e.editor.getValue()}))},changeModel:function(){o["editor"].setModelLanguage(this.editor.getModel(),this.filenameType)},getValueCode:function(){return this.editor.getValue()}}},l=c,u=(n("a0da"),n("0c7c")),d=Object(u["a"])(l,r,a,!1,null,"18b7ff3c",null);t["a"]=d.exports}}]);